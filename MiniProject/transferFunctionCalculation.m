clear;
clc;
data = [0	0	168.00 %encoder position, velocity, and time data (us)
1	0.00	2912.00
2	1.17	4596.00
3	1.43	5972.00
4	1.83	7044.00
5	1.84	8112.00
6	1.83	9184.00
7	1.81	10268.00
9	3.48	11396.00
10	1.73	12528.00
12	3.28	13724.00
14	3.29	14916.00
16	3.29	16108.00
19	4.89	17312.00
21	3.27	18512.00
23	3.29	19704.00
26	4.92	20900.00
29	4.91	22100.00
31	3.28	23296.00
34	4.94	24488.00
37	4.87	25696.00
40	4.94	26888.00
43	4.89	28092.00
46	4.94	29284.00
50	6.52	30488.00
53	4.89	31692.00
57	6.50	32900.00
60	4.96	34088.00
64	6.50	35296.00
68	6.56	36492.00
71	4.91	37692.00
76	8.12	38900.00
80	6.52	40104.00
84	6.52	41308.00
88	6.52	42512.00
92	6.54	43712.00
97	8.10	44924.00
101	6.50	46132.00
106	7.84	47384.00
111	7.76	48648.00
116	7.81	49904.00
121	7.74	51172.00
126	7.76	52436.00
131	7.76	53700.00
137	9.29	54968.00
142	7.81	56224.00
148	9.32	57488.00
153	7.74	58756.00
159	9.29	60024.00
164	7.79	61284.00
170	9.29	62552.00
175	7.79	63812.00
181	9.32	65076.00
187	9.26	66348.00
193	9.23	67624.00
199	9.35	68884.00
205	9.29	70152.00
211	9.26	71424.00
217	9.26	72696.00
224	10.87	73960.00
230	8.89	75284.00
237	10.77	76560.00
243	8.87	77888.00
250	10.90	79148.00
256	8.97	80460.00
263	10.73	81740.00
270	10.44	83056.00
277	10.34	84384.00
284	10.41	85704.00
291	10.31	87036.00
298	10.41	88356.00
305	10.31	89688.00
312	10.38	91012.00
320	11.82	92340.00
327	10.34	93668.00
334	10.41	94988.00
342	11.75	96324.00
350	11.82	97652.00
357	10.34	98980.00
365	11.82	100308.00
372	9.95	101688.00
380	11.82	103016.00
388	11.41	104392.00
396	11.28	105784.00
404	11.38	107164.00
412	11.38	108544.00
421	12.65	109940.00
429	11.38	111320.00
437	11.34	112704.00
445	11.38	114084.00
454	12.76	115468.00
462	11.34	116852.00
470	11.38	118232.00
479	12.69	119624.00
488	12.73	121012.00
496	11.34	122396.00
504	11.34	123780.00
513	12.65	125176.00
522	12.80	126556.00
530	11.41	127932.00
539	12.62	129332.00
548	12.80	130712.00
557	12.76	132096.00
565	11.58	133452.00
574	13.06	134804.00
583	12.99	136164.00
592	12.87	137536.00
600	11.65	138884.00
609	12.91	140252.00
618	12.87	141624.00
627	13.03	142980.00
636	13.03	144336.00
645	12.84	145712.00
654	13.06	147064.00
662	11.48	148432.00
672	14.39	149796.00
681	12.91	151164.00
689	11.65	152512.00
698	12.80	153892.00
708	14.60	155236.00
717	12.87	156608.00
726	12.95	157972.00
735	13.03	159328.00
744	13.03	160684.00
753	12.84	162060.00
762	13.06	163412.00
771	12.99	164772.00
781	14.22	166152.00
790	13.06	167504.00
799	12.99	168864.00
808	12.80	170244.00
818	14.52	171596.00
827	12.84	172972.00
836	12.95	174336.00
845	12.87	175708.00
854	12.99	177068.00];
s = tf('s');
K = 13; %approximate maximum angular velocity
sigma = 18.253; %calculated sigma from approximate rise time of a first order system
G = K*sigma/(s + sigma);
figure(1);
plot(data(:,3)/10^6, data(:,2));
hold on
step(G);
postPIDData = [-1	-12	1576728 %data after PID controller was implemented
-1	-1165	1577380
-1	-12	1578288
-1	-12	1579080
-1	-12	1579860
-2	-951	1580660
-2	-24	1581520
-2	-24	1582308
-3	-983	1583096
-3	-36	1583952
-4	-980	1584752
-4	-48	1585612
-5	-1002	1586404
-6	-879	1587324
-6	-72	1588172
-7	-1026	1588964
-8	-903	1589884
-9	-974	1590744
-10	-974	1591616
-11	-958	1592516
-12	-949	1593428
-13	-987	1594324
-14	-984	1595236
-15	-1004	1596140
-17	-1744	1597104
-18	-988	1598068
-19	-1053	1598972
-21	-1793	1599936
-22	-1037	1600900
-23	-1059	1601852
-25	-1849	1602812
-26	-1086	1603772
-28	-1879	1604736
-30	-1891	1605704
-31	-1175	1606636
-33	-1961	1607588
-34	-1185	1608552
-36	-1985	1609512
-38	-2003	1610472
-40	-2015	1611436
-41	-1282	1612396
-43	-2085	1613348
-45	-2097	1614308
-47	-2121	1615268
-49	-2140	1616232
-51	-2171	1617192
-53	-2189	1618156
-55	-2221	1619116
-57	-2226	1620080
-59	-2271	1621032
-61	-2323	1621976
-63	-2334	1622928
-66	-3111	1623888
-68	-2397	1624840
-70	-2408	1625800
-72	-2434	1626760
-75	-3233	1627724
-77	-2496	1628684
-79	-2522	1629644
-82	-3282	1630616
-84	-2584	1631576
-86	-2610	1632536
-89	-3419	1633496
-91	-2673	1634456
-93	-2685	1635416
-96	-3479	1636388
-98	-2782	1637332
-100	-2780	1638296
-103	-3466	1639308
-106	-3495	1640320
-108	-2813	1641328
-111	-3576	1642340
-113	-2871	1643352
-116	-3640	1644360
-119	-3678	1645372
-121	-2973	1646384
-124	-3742	1647396
-127	-3781	1648408
-130	-3784	1649428
-132	-3120	1650436
-135	-3883	1651448
-138	-3895	1652468
-141	-3960	1653480
-144	-3964	1654500
-147	-4046	1655508
-149	-3327	1656524
-152	-4085	1657544
-155	-4141	1658556
-158	-4153	1659576
-161	-4219	1660588
-164	-4257	1661608
-166	-3553	1662620
-169	-4323	1663632
-172	-4344	1664652
-175	-4410	1665660
-178	-4422	1666680
-181	-4488	1667688
-184	-4500	1668708
-187	-4566	1669716
-190	-4579	1670736
-193	-4645	1671744
-197	-5395	1672764
-200	-4691	1673784
-203	-4775	1674792
-206	-4788	1675812
-209	-4854	1676820
-212	-4867	1677840
-216	-5679	1678856
-219	-4976	1679868
-222	-4998	1680888
-225	-5064	1681896
-228	-5078	1682916
-231	-5144	1683924
-234	-5157	1684944
-237	-5215	1685952
-241	-5963	1686972
-244	-5264	1687992
-247	-5347	1689004
-250	-5370	1690024
-253	-5437	1691032
-257	-6188	1692052
-260	-5494	1693076
-263	-5561	1694088
-266	-5575	1695108
-270	-6327	1696132
-273	-5695	1697144
-276	-5709	1698164
-280	-6461	1699188
-283	-5829	1700200
-286	-5843	1701220
-289	-5910	1702232
-293	-6648	1703260
-296	-5969	1704280
-299	-6045	1705288
-302	-6060	1706312
-306	-6871	1707336
-309	-6181	1708348
-312	-6196	1709372
-315	-6263	1710384
-319	-7001	1711412
-322	-6340	1712432
-325	-6391	1713448
-329	-7149	1714472
-332	-6468	1715496
-336	-7233	1716516
-339	-6581	1717532
-342	-6605	1718556
-346	-7370	1719576
-349	-6727	1720588
-352	-6743	1721612
-356	-7508	1722632
-359	-6865	1723644
-362	-6881	1724668
-365	-6949	1725688
-369	-7735	1726700
-372	-7011	1727724
-375	-7079	1728740
-379	-7838	1729764
-382	-7167	1730784
-386	-7924	1731804
-389	-7282	1732816
-392	-7298	1733840
-396	-8075	1734860
-399	-7412	1735876
-403	-8172	1736900
-406	-7492	1737920
-410	-8247	1738944
-413	-7617	1739956
-416	-7633	1740980
-420	-8399	1742000
-423	-7758	1743012
-426	-7774	1744036
-430	-8540	1745056
-433	-7899	1746068
-436	-7916	1747092
-440	-8671	1748112
-443	-8032	1749128
-447	-8793	1750148
-450	-8114	1751172
-454	-8869	1752192
-457	-8230	1753208
-461	-8991	1754232
-464	-8312	1755252
-467	-8356	1756268
-471	-9146	1757280
-474	-8464	1758292
-478	-9223	1759320
-481	-8600	1760316
-484	-8608	1761328
-488	-9367	1762356
-491	-8781	1763352
-494	-8770	1764372
-498	-9523	1765404
-501	-8925	1766392
-504	-8889	1767412
-508	-9679	1768432
-511	-9016	1769444
-515	-9804	1770456
-518	-9108	1771468
-522	-9870	1772492
-525	-9209	1773508
-529	-9994	1774520
-532	-9311	1775536
-536	-10050	1776560
-539	-9312	1777624
-543	-10198	1778640
-546	-9391	1779720
-550	-10278	1780752
-553	-9533	1781800
-556	-9681	1782812
-560	-10449	1783836
-563	-9649	1784920
-567	-10600	1785912
-571	-10443	1786980
-574	-9803	1788052
-578	-10667	1789076
-581	-9930	1790140
-585	-10794	1791164
-589	-10709	1792240
-592	-10076	1793312
-596	-10814	1794388
-600	-10904	1795460
-603	-10256	1796524
-607	-10977	1797600
-610	-10345	1798672
-614	-11082	1799748
-618	-11173	1800820
-621	-10517	1801888
-625	-11257	1802960
-628	-10607	1804036
-632	-11353	1805108
-636	-11433	1806184
-639	-10812	1807240
-643	-11549	1808304
-646	-10902	1809368
-650	-11635	1810444
-654	-11663	1811520
-658	-11722	1812600
-661	-11160	1813648
-665	-11850	1814724
-668	-11211	1815800
-672	-11968	1816872
-676	-11996	1817948
-679	-11394	1819016
-683	-12125	1820092
-686	-11494	1821164
-690	-12233	1822236
-694	-12272	1823312
-697	-11670	1824380
-701	-12412	1825452
-705	-12461	1826528
-708	-11823	1827604
-712	-12581	1828676
-716	-12610	1829752
-719	-12032	1830808
-723	-12771	1831872
-727	-12821	1832940
-730	-12186	1834008
-734	-12889	1835084
-738	-12960	1836156
-741	-12356	1837220
-745	-13080	1838296
-748	-12442	1839372
-752	-13190	1840444
-756	-13231	1841520
-759	-12638	1842584
-763	-13362	1843660
-767	-13434	1844732
-770	-12778	1845808
-774	-13534	1846884
-778	-13606	1847956
-782	-13678	1849032
-785	-13044	1850096
-789	-13779	1851168
-793	-13820	1852248
-796	-13201	1853320
-800	-13942	1854392
-804	-14025	1855468
-807	-13391	1856540
-811	-14126	1857604
-814	-13487	1858676
-818	-14238	1859748
-822	-14269	1860824
-825	-13678	1861888
-829	-14403	1862960
-833	-14465	1864036
-836	-13837	1865108
-840	-14578	1866180
-844	-14620	1867256
-848	-14736	1868328
-851	-14084	1869392
-855	-14817	1870468
-859	-14880	1871540
-862	-14245	1872616
-866	-14994	1873688
-869	-14374	1874756
-873	-15140	1875820
-877	-15193	1876888
-880	-14544	1877960
-884	-15265	1879036
-887	-14667	1880116
-891	-15433	1881172
-895	-15496	1882236
-899	-15528	1883312
-902	-14893	1884388
-906	-15654	1885460
-910	-15686	1886536
-914	-15792	1887612
-917	-15160	1888676
-921	-15886	1889752
-925	-15951	1890828
-928	-15316	1891900
-932	-16046	1892976
-935	-15456	1894040
-939	-16183	1895116
-943	-16269	1896184
-946	-15621	1897256
-950	-16375	1898324
-953	-15754	1899400
-957	-16513	1900464
-961	-16556	1901536
-964	-15912	1902616
-968	-16653	1903688
-972	-16718	1904768
-975	-16134	1905824
-979	-16856	1906896
-983	-16911	1907972
-986	-16285	1909044
-990	-17019	1910116
-993	-16419	1911180
-997	-17158	1912252
-1000	-16506	1913328
-1004	-17137	1914452
-1008	-17185	1915580
-1012	-17299	1916704
-1015	-16684	1917824
-1019	-17420	1918940
-1023	-17448	1920064
-1027	-17553	1921180];
figure(2); %PID data plot
plot(postPIDData(:,3),abs(postPIDData(:,2)));
title('PID Controlled Value');
xlabel('time (us)');
ylabel('PID Value');